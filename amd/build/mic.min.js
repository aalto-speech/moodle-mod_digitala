define("mod_digitala/mic",["exports","RecordRTC"],(function(_exports,_RecordRTC){var obj;
/*
   * @module     mod_digitala/mic
   * @copyright  2022 Name
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */let recorder;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initializeMicrophone=void 0,_RecordRTC=(obj=_RecordRTC)&&obj.__esModule?obj:{default:obj};let audio,isRecording=!1;const startStopRecording=pagenum=>{switch(isRecording){case!1:navigator.mediaDevices.getUserMedia({audio:!0}).then((stream=>{const options={audioBitsPerSecond:16e3,type:"audio",recorderType:_RecordRTC.default.StereoAudioRecorder,mimeType:"audio/wav"};recorder=new _RecordRTC.default(stream,options),isRecording=!0,recorder.startRecording(),window.console.log("started to record")})).catch((err=>{window.console.error(err)}));break;case!0:isRecording=!1,recorder.stopRecording((()=>{const audioBlob=recorder.getBlob();window.console.log("audioBlob:",audioBlob);const audioUrl=URL.createObjectURL(audioBlob);if(audio=new Audio(audioUrl),window.console.log("audioUrl",audioUrl),window.console.log("Enable submit button"),document.getElementById("id_submitbutton").style.display="",1===pagenum){let reader=new FileReader;reader.readAsDataURL(audioBlob),reader.onload=()=>{window.console.log(">",reader.result),document.forms.answerrecording[0].value=reader.result}}})),window.console.log("recording stopped")}};_exports.initializeMicrophone=pagenum=>{const recButton=document.getElementById("record"),stopButton=document.getElementById("stopRecord"),listenButton=document.getElementById("listenButton");stopButton.disabled=!0,listenButton.disabled=!0,window.console.log("page number",pagenum),recButton.onclick=()=>{recButton.style.backgroundColor="blue",recButton.disabled=!0,stopButton.disabled=!1,listenButton.style.display="none",startStopRecording(pagenum)},stopButton.onclick=()=>{recButton.style.backgroundColor="red",recButton.disabled=!1,stopButton.disabled=!0,listenButton.disabled=!1,listenButton.style.display="inline-block",startStopRecording(pagenum)},listenButton.onclick=()=>{void 0!==audio&&audio.play()}}}));

//# sourceMappingURL=mic.min.js.map