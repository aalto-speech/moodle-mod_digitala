define("mod_digitala/mic",["exports","RecordRTC"],(function(_exports,_RecordRTC){var obj,recorder;
/*
   * @module     mod_digitala/mic
   * @copyright  2022 Name
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initializeMicrophone=void 0,_RecordRTC=(obj=_RecordRTC)&&obj.__esModule?obj:{default:obj};var audio,isRecording=!1,startStopRecording=function(pagenum){switch(isRecording){case!1:navigator.mediaDevices.getUserMedia({audio:!0}).then((function(stream){var options={audioBitsPerSecond:16e3,type:"audio",recorderType:_RecordRTC.default.StereoAudioRecorder,mimeType:"audio/wav"};recorder=new _RecordRTC.default(stream,options),isRecording=!0,recorder.startRecording(),window.console.log("started to record")})).catch((function(err){window.console.error(err)}));break;case!0:isRecording=!1,recorder.stopRecording((function(){var audioBlob=recorder.getBlob();window.console.log("audioBlob:",audioBlob);var audioUrl=URL.createObjectURL(audioBlob);if(audio=new Audio(audioUrl),window.console.log("audioUrl",audioUrl),window.console.log("Enable submit button"),document.getElementById("id_submitbutton").style.display="",1===pagenum){var reader=new FileReader;reader.readAsDataURL(audioBlob),reader.onload=function(){window.console.log(">",reader.result),document.forms.answerrecording[0].value=reader.result}}})),window.console.log("recording stopped")}};_exports.initializeMicrophone=function(pagenum){var recButton=document.getElementById("record"),stopButton=document.getElementById("stopRecord"),listenButton=document.getElementById("listenButton");listenButton.disabled=!0,window.console.log("page number",pagenum),recButton.onclick=function(){recButton.disabled=!0,stopButton.disabled=!1,listenButton.disabled=!0,recButton.style.display="none",stopButton.style.display="inline-block",startStopRecording(pagenum)},stopButton.onclick=function(){recButton.disabled=!1,stopButton.disabled=!0,listenButton.disabled=!1,recButton.style.display="inline-block",stopButton.style.display="none",startStopRecording(pagenum)},listenButton.onclick=function(){var microphoneIcon;microphoneIcon=document.getElementById("microphoneIconBox"),void 0!==audio?(audio.play(),microphoneIcon.style.border="2.5px dashed green"):microphoneIcon.style.border="2.5px dashed red"}}}));

//# sourceMappingURL=mic.min.js.map